!function t(a,r,n){function e(i,u){if(!r[i]){if(!a[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(o)return o(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[i]={exports:{}};a[i][0].call(c.exports,function(t){var r=a[i][1][t];return e(r?r:t)},c,c.exports,t,a,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)e(n[i]);return e}({1:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var e=t("../lib/gl-matrix"),o=function t(a,r){n(this,t),this.modelTransform=e.mat4.create(),this.vbo=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.vbo),a.bufferData(a.ARRAY_BUFFER,r,a.STATIC_DRAW)};r.Actor=o},{"../lib/gl-matrix":6}],2:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function e(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function o(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}var i=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),u=t("./actor"),l=function(t){function a(t){n(this,a);var r=e(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,a.data));return r.renderStyle=0,t.vertexAttribPointer(0,3,t.FLOAT,!1,0,0),r}return o(a,t),i(a,[{key:"draw",value:function(t){t.drawArrays(t.TRIANGLES,0,3)}}]),a}(u.Actor);l.data=new Float32Array([0,0,0,0,.5,0,.7,0,0]),r.BasicActor=l},{"./actor":1}],3:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),o=t("../../lib/gl-matrix"),i=function(){function t(a){n(this,t),this.position=o.vec3.create(),this.speed=0,this.actor=a}return e(t,[{key:"move",value:function(t){o.vec3.scaleAndAdd(this.position,this.position,t,this.speed),o.mat4.fromTranslation(this.actor.modelTransform,this.position)}}]),t}();r.Entity=i},{"../../lib/gl-matrix":6}],4:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function e(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function o(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}var i=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),u=t("./entity"),l=t("../../lib/gl-matrix"),s=function(t){function a(t){n(this,a);var r=e(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return r.inputDirection=l.vec3.create(),r.speed=.005,r}return o(a,t),i(a,[{key:"moveWithInputs",value:function(t,a){var r=0!==t&&0!==a?.7071:1;this.inputDirection[0]=a*r,this.inputDirection[1]=t*r,this.move(this.inputDirection)}}]),a}(u.Entity);r.Player=s},{"../../lib/gl-matrix":6,"./entity":3}],5:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),o=t("./entities/player"),i=t("../actors/basic_actor"),u=function(){function t(a){n(this,t),this.gl=a,this.init()}return e(t,[{key:"tick",value:function(t){var a=t.isKeyDown(38)?1:t.isKeyDown(40)?-1:0,r=t.isKeyDown(37)?-1:t.isKeyDown(39)?1:0;this.player.moveWithInputs(a,r)}},{key:"init",value:function(){this.actors=[new i.BasicActor(this.gl)],this.player=new o.Player(this.actors[0]),this.entities=[this.player]}}]),t}();r.Game=u},{"../actors/basic_actor":2,"./entities/player":4}],6:[function(t,a,r){!function(t,n){if("object"==typeof r&&"object"==typeof a)a.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var o in e)("object"==typeof r?r:t)[o]=e[o]}}(this,function(){return function(t){function a(n){if(r[n])return r[n].exports;var e=r[n]={exports:{},id:n,loaded:!1};return t[n].call(e.exports,e,e.exports,a),e.loaded=!0,e.exports}var r={};return a.m=t,a.c=r,a.p="",a(0)}([function(t,a,r){a.glMatrix=r(1),a.mat2=r(2),a.mat2d=r(3),a.mat3=r(4),a.mat4=r(5),a.quat=r(6),a.vec2=r(9),a.vec3=r(7),a.vec4=r(8)},function(t,a){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===this.Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},r.equals=function(t,a){return Math.abs(t-a)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},t.exports=r},function(t,a,r){var n=r(1),e={};e.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,a,r,e){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=r,o[3]=e,o},e.set=function(t,a,r,n,e){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t},e.transpose=function(t,a){if(t===a){var r=a[1];t[1]=a[2],t[2]=r}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},e.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r*o-e*n;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-e*i,t[3]=r*i,t):null},e.adjoint=function(t,a){var r=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=r,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=r[0],l=r[1],s=r[2],c=r[3];return t[0]=n*u+o*l,t[1]=e*u+i*l,t[2]=n*s+o*c,t[3]=e*s+i*c,t},e.mul=e.multiply,e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*u,t[1]=e*l+i*u,t[2]=n*-u+o*l,t[3]=e*-u+i*l,t},e.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=r[0],l=r[1];return t[0]=n*u,t[1]=e*u,t[2]=o*l,t[3]=i*l,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,a,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,a,r]},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},e.sub=e.subtract,e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],u=a[0],l=a[1],s=a[2],c=a[3];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(e-l)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},e.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},e.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},t.exports=e},function(t,a,r){var n=r(1),e={};e.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var a=new n.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,a,r,e,o,i){var u=new n.ARRAY_TYPE(6);return u[0]=t,u[1]=a,u[2]=r,u[3]=e,u[4]=o,u[5]=i,u},e.set=function(t,a,r,n,e,o,i){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=i,t},e.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],u=a[5],l=r*o-n*e;return l?(l=1/l,t[0]=o*l,t[1]=-n*l,t[2]=-e*l,t[3]=r*l,t[4]=(e*u-o*i)*l,t[5]=(n*i-r*u)*l,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=r[0],c=r[1],M=r[2],f=r[3],h=r[4],S=r[5];return t[0]=n*s+o*c,t[1]=e*s+i*c,t[2]=n*M+o*f,t[3]=e*M+i*f,t[4]=n*h+o*S+u,t[5]=e*h+i*S+l,t},e.mul=e.multiply,e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*s,t[1]=e*c+i*s,t[2]=n*-s+o*c,t[3]=e*-s+i*c,t[4]=u,t[5]=l,t},e.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=r[0],c=r[1];return t[0]=n*s,t[1]=e*s,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=l,t},e.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=r[0],c=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=i,t[4]=n*s+o*c+u,t[5]=e*s+i*c+l,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t},e.sub=e.subtract,e.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t},e.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=a[0],c=a[1],M=a[2],f=a[3],h=a[4],S=a[5];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(e-c)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(o-M)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-f)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-h)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(l-S)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))},t.exports=e},function(t,a,r){var n=r(1),e={};e.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},e.clone=function(t){var a=new n.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},e.fromValues=function(t,a,r,e,o,i,u,l,s){var c=new n.ARRAY_TYPE(9);return c[0]=t,c[1]=a,c[2]=r,c[3]=e,c[4]=o,c[5]=i,c[6]=u,c[7]=l,c[8]=s,c},e.set=function(t,a,r,n,e,o,i,u,l,s){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],e=a[5];t[1]=a[3],t[2]=a[6],t[3]=r,t[5]=a[7],t[6]=n,t[7]=e}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},e.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8],M=c*i-u*s,f=-c*o+u*l,h=s*o-i*l,S=r*M+n*f+e*h;return S?(S=1/S,t[0]=M*S,t[1]=(-c*n+e*s)*S,t[2]=(u*n-e*i)*S,t[3]=f*S,t[4]=(c*r-e*l)*S,t[5]=(-u*r+e*o)*S,t[6]=h*S,t[7]=(-s*r+n*l)*S,t[8]=(i*r-n*o)*S,t):null},e.adjoint=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8];return t[0]=i*c-u*s,t[1]=e*s-n*c,t[2]=n*u-e*i,t[3]=u*l-o*c,t[4]=r*c-e*l,t[5]=e*o-r*u,t[6]=o*s-i*l,t[7]=n*l-r*s,t[8]=r*i-n*o,t},e.determinant=function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return a*(s*o-i*l)+r*(-s*e+i*u)+n*(l*e-o*u)},e.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],M=a[8],f=r[0],h=r[1],S=r[2],x=r[3],m=r[4],I=r[5],D=r[6],d=r[7],v=r[8];return t[0]=f*n+h*i+S*s,t[1]=f*e+h*u+S*c,t[2]=f*o+h*l+S*M,t[3]=x*n+m*i+I*s,t[4]=x*e+m*u+I*c,t[5]=x*o+m*l+I*M,t[6]=D*n+d*i+v*s,t[7]=D*e+d*u+v*c,t[8]=D*o+d*l+v*M,t},e.mul=e.multiply,e.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],M=a[8],f=r[0],h=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=f*n+h*i+s,t[7]=f*e+h*u+c,t[8]=f*o+h*l+M,t},e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],M=a[8],f=Math.sin(r),h=Math.cos(r);return t[0]=h*n+f*i,t[1]=h*e+f*u,t[2]=h*o+f*l,t[3]=h*i-f*n,t[4]=h*u-f*e,t[5]=h*l-f*o,t[6]=s,t[7]=c,t[8]=M,t},e.scale=function(t,a,r){var n=r[0],e=r[1];return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=e*a[3],t[4]=e*a[4],t[5]=e*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},e.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r+r,u=n+n,l=e+e,s=r*i,c=n*i,M=n*u,f=e*i,h=e*u,S=e*l,x=o*i,m=o*u,I=o*l;return t[0]=1-M-S,t[3]=c-I,t[6]=f+m,t[1]=c+I,t[4]=1-s-S,t[7]=h-x,t[2]=f-m,t[5]=h+x,t[8]=1-s-M,t},e.normalFromMat4=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8],M=a[9],f=a[10],h=a[11],S=a[12],x=a[13],m=a[14],I=a[15],D=r*u-n*i,d=r*l-e*i,v=r*s-o*i,F=n*l-e*u,b=n*s-o*u,p=e*s-o*l,w=c*x-M*S,y=c*m-f*S,g=c*I-h*S,P=M*m-f*x,E=M*I-h*x,A=f*I-h*m,z=D*A-d*E+v*P+F*g-b*y+p*w;return z?(z=1/z,t[0]=(u*A-l*E+s*P)*z,t[1]=(l*g-i*A-s*y)*z,t[2]=(i*E-u*g+s*w)*z,t[3]=(e*E-n*A-o*P)*z,t[4]=(r*A-e*g+o*y)*z,t[5]=(n*g-r*E-o*w)*z,t[6]=(x*p-m*b+I*F)*z,t[7]=(m*v-S*p-I*d)*z,t[8]=(S*b-x*v+I*D)*z,t):null},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t},e.sub=e.subtract,e.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t},e.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],M=t[8],f=a[0],h=a[1],S=a[2],x=a[3],m=a[4],I=a[5],D=t[6],d=a[7],v=a[8];return Math.abs(r-f)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(e-h)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(o-S)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(i-x)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-m)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-I)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(s-D)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(c-d)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(M-v)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(v))},t.exports=e},function(t,a,r){var n=r(1),e={scalar:{},SIMD:{}};e.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var a=new n.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},e.fromValues=function(t,a,r,e,o,i,u,l,s,c,M,f,h,S,x,m){var I=new n.ARRAY_TYPE(16);return I[0]=t,I[1]=a,I[2]=r,I[3]=e,I[4]=o,I[5]=i,I[6]=u,I[7]=l,I[8]=s,I[9]=c,I[10]=M,I[11]=f,I[12]=h,I[13]=S,I[14]=x,I[15]=m,I},e.set=function(t,a,r,n,e,o,i,u,l,s,c,M,f,h,S,x,m){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=c,t[10]=M,t[11]=f,t[12]=h,t[13]=S,t[14]=x,t[15]=m,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.scalar.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],i=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=i,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},e.SIMD.transpose=function(t,a){var r,n,e,o,i,u,l,s,c,M;return r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(e,o,0,1,4,5),l=SIMD.Float32x4.shuffle(i,u,0,2,4,6),s=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,s),i=SIMD.Float32x4.shuffle(r,n,2,3,6,7),u=SIMD.Float32x4.shuffle(e,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),M=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,M),t},e.transpose=n.USE_SIMD?e.SIMD.transpose:e.scalar.transpose,e.scalar.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8],M=a[9],f=a[10],h=a[11],S=a[12],x=a[13],m=a[14],I=a[15],D=r*u-n*i,d=r*l-e*i,v=r*s-o*i,F=n*l-e*u,b=n*s-o*u,p=e*s-o*l,w=c*x-M*S,y=c*m-f*S,g=c*I-h*S,P=M*m-f*x,E=M*I-h*x,A=f*I-h*m,z=D*A-d*E+v*P+F*g-b*y+p*w;return z?(z=1/z,t[0]=(u*A-l*E+s*P)*z,t[1]=(e*E-n*A-o*P)*z,t[2]=(x*p-m*b+I*F)*z,t[3]=(f*b-M*p-h*F)*z,t[4]=(l*g-i*A-s*y)*z,t[5]=(r*A-e*g+o*y)*z,t[6]=(m*v-S*p-I*d)*z,t[7]=(c*p-f*v+h*d)*z,t[8]=(i*E-u*g+s*w)*z,t[9]=(n*g-r*E-o*w)*z,t[10]=(S*b-x*v+I*D)*z,t[11]=(M*v-c*b-h*D)*z,t[12]=(u*y-i*P-l*w)*z,t[13]=(r*P-n*y+e*w)*z,t[14]=(x*d-S*F-m*D)*z,t[15]=(c*F-M*d+f*D)*z,t):null},e.SIMD.invert=function(t,a){var r,n,e,o,i,u,l,s,c,M,f=SIMD.Float32x4.load(a,0),h=SIMD.Float32x4.load(a,4),S=SIMD.Float32x4.load(a,8),x=SIMD.Float32x4.load(a,12);return i=SIMD.Float32x4.shuffle(f,h,0,1,4,5),n=SIMD.Float32x4.shuffle(S,x,0,1,4,5),r=SIMD.Float32x4.shuffle(i,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,i,1,3,5,7),i=SIMD.Float32x4.shuffle(f,h,2,3,6,7),o=SIMD.Float32x4.shuffle(S,x,2,3,6,7),e=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(e,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(n,i),l=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,e),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),u),s=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(e,i)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(e,i)),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,i)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),s),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),l),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(r,e),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),c),M=SIMD.Float32x4.mul(r,u),M=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(M,2,3,0,1),M),M=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(M,1,0,3,2),M),i=SIMD.Float32x4.reciprocalApproximation(M),M=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(M,SIMD.Float32x4.mul(i,i))),(M=SIMD.Float32x4.swizzle(M,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(M,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(M,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(M,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(M,c)),t):null},e.invert=n.USE_SIMD?e.SIMD.invert:e.scalar.invert,e.scalar.adjoint=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8],M=a[9],f=a[10],h=a[11],S=a[12],x=a[13],m=a[14],I=a[15];return t[0]=u*(f*I-h*m)-M*(l*I-s*m)+x*(l*h-s*f),t[1]=-(n*(f*I-h*m)-M*(e*I-o*m)+x*(e*h-o*f)),t[2]=n*(l*I-s*m)-u*(e*I-o*m)+x*(e*s-o*l),t[3]=-(n*(l*h-s*f)-u*(e*h-o*f)+M*(e*s-o*l)),t[4]=-(i*(f*I-h*m)-c*(l*I-s*m)+S*(l*h-s*f)),t[5]=r*(f*I-h*m)-c*(e*I-o*m)+S*(e*h-o*f),t[6]=-(r*(l*I-s*m)-i*(e*I-o*m)+S*(e*s-o*l)),t[7]=r*(l*h-s*f)-i*(e*h-o*f)+c*(e*s-o*l),t[8]=i*(M*I-h*x)-c*(u*I-s*x)+S*(u*h-s*M),t[9]=-(r*(M*I-h*x)-c*(n*I-o*x)+S*(n*h-o*M)),t[10]=r*(u*I-s*x)-i*(n*I-o*x)+S*(n*s-o*u),t[11]=-(r*(u*h-s*M)-i*(n*h-o*M)+c*(n*s-o*u)),t[12]=-(i*(M*m-f*x)-c*(u*m-l*x)+S*(u*f-l*M)),t[13]=r*(M*m-f*x)-c*(n*m-e*x)+S*(n*f-e*M),t[14]=-(r*(u*m-l*x)-i*(n*m-e*x)+S*(n*l-e*u)),t[15]=r*(u*f-l*M)-i*(n*f-e*M)+c*(n*l-e*u),t},e.SIMD.adjoint=function(t,a){var r,n,e,o,i,u,l,s,c,M,f,h,S;return r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),c=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(e,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(r,n,2,3,6,7),s=SIMD.Float32x4.shuffle(e,o,2,3,6,7),l=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.mul(l,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.mul(u,c),f=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),M),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),M),S=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(s,c)),S=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),S),S=SIMD.Float32x4.swizzle(S,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),M),h=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(l,c)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),S=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),S),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),h),S=SIMD.Float32x4.sub(S,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),h),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),S=SIMD.Float32x4.sub(S,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),S=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),S),SIMD.Float32x4.store(t,0,M),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,S),t},e.adjoint=n.USE_SIMD?e.SIMD.adjoint:e.scalar.adjoint,e.determinant=function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8],c=t[9],M=t[10],f=t[11],h=t[12],S=t[13],x=t[14],m=t[15],I=a*i-r*o,D=a*u-n*o,d=a*l-e*o,v=r*u-n*i,F=r*l-e*i,b=n*l-e*u,p=s*S-c*h,w=s*x-M*h,y=s*m-f*h,g=c*x-M*S,P=c*m-f*S,E=M*m-f*x;return I*E-D*P+d*g+v*y-F*w+b*p},e.SIMD.multiply=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.load(r,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,l);var s=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var M=SIMD.Float32x4.load(r,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),i))));SIMD.Float32x4.store(t,8,f);var h=SIMD.Float32x4.load(r,12),S=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,S),t},e.scalar.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],M=a[8],f=a[9],h=a[10],S=a[11],x=a[12],m=a[13],I=a[14],D=a[15],d=r[0],v=r[1],F=r[2],b=r[3];return t[0]=d*n+v*u+F*M+b*x,t[1]=d*e+v*l+F*f+b*m,t[2]=d*o+v*s+F*h+b*I,t[3]=d*i+v*c+F*S+b*D,d=r[4],v=r[5],F=r[6],b=r[7],t[4]=d*n+v*u+F*M+b*x,t[5]=d*e+v*l+F*f+b*m,t[6]=d*o+v*s+F*h+b*I,t[7]=d*i+v*c+F*S+b*D,d=r[8],v=r[9],F=r[10],b=r[11],t[8]=d*n+v*u+F*M+b*x,t[9]=d*e+v*l+F*f+b*m,t[10]=d*o+v*s+F*h+b*I,t[11]=d*i+v*c+F*S+b*D,d=r[12],v=r[13],F=r[14],b=r[15],t[12]=d*n+v*u+F*M+b*x,t[13]=d*e+v*l+F*f+b*m,t[14]=d*o+v*s+F*h+b*I,t[15]=d*i+v*c+F*S+b*D,t},e.multiply=n.USE_SIMD?e.SIMD.multiply:e.scalar.multiply,e.mul=e.multiply,e.scalar.translate=function(t,a,r){var n,e,o,i,u,l,s,c,M,f,h,S,x=r[0],m=r[1],I=r[2];return a===t?(t[12]=a[0]*x+a[4]*m+a[8]*I+a[12],t[13]=a[1]*x+a[5]*m+a[9]*I+a[13],t[14]=a[2]*x+a[6]*m+a[10]*I+a[14],t[15]=a[3]*x+a[7]*m+a[11]*I+a[15]):(n=a[0],e=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],M=a[8],f=a[9],h=a[10],S=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=s,t[7]=c,t[8]=M,t[9]=f,t[10]=h,t[11]=S,t[12]=n*x+u*m+M*I+a[12],t[13]=e*x+l*m+f*I+a[13],t[14]=o*x+s*m+h*I+a[14],t[15]=i*x+c*m+S*I+a[15]),t},e.SIMD.translate=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4(r[0],r[1],r[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var l=SIMD.Float32x4.add(n,SIMD.Float32x4.add(e,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,l),t},e.translate=n.USE_SIMD?e.SIMD.translate:e.scalar.translate,e.scalar.scale=function(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},e.SIMD.scale=function(t,a,r){var n,e,o,i=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0))),e=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},e.scale=n.USE_SIMD?e.SIMD.scale:e.scalar.scale,e.rotate=function(t,a,r,e){var o,i,u,l,s,c,M,f,h,S,x,m,I,D,d,v,F,b,p,w,y,g,P,E,A=e[0],z=e[1],O=e[2],R=Math.sqrt(A*A+z*z+O*O);return Math.abs(R)<n.EPSILON?null:(R=1/R,A*=R,z*=R,O*=R,o=Math.sin(r),i=Math.cos(r),u=1-i,l=a[0],s=a[1],c=a[2],M=a[3],f=a[4],h=a[5],S=a[6],x=a[7],m=a[8],I=a[9],D=a[10],d=a[11],v=A*A*u+i,F=z*A*u+O*o,b=O*A*u-z*o,p=A*z*u-O*o,w=z*z*u+i,y=O*z*u+A*o,g=A*O*u+z*o,P=z*O*u-A*o,E=O*O*u+i,t[0]=l*v+f*F+m*b,t[1]=s*v+h*F+I*b,t[2]=c*v+S*F+D*b,t[3]=M*v+x*F+d*b,t[4]=l*p+f*w+m*y,t[5]=s*p+h*w+I*y,t[6]=c*p+S*w+D*y,t[7]=M*p+x*w+d*y,t[8]=l*g+f*P+m*E,t[9]=s*g+h*P+I*E,t[10]=c*g+S*P+D*E,t[11]=M*g+x*P+d*E,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},e.scalar.rotateX=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],i=a[5],u=a[6],l=a[7],s=a[8],c=a[9],M=a[10],f=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+s*n,
t[5]=i*e+c*n,t[6]=u*e+M*n,t[7]=l*e+f*n,t[8]=s*e-o*n,t[9]=c*e-i*n,t[10]=M*e-u*n,t[11]=f*e-l*n,t},e.SIMD.rotateX=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),e=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,4),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,e),SIMD.Float32x4.mul(o,n))),t},e.rotateX=n.USE_SIMD?e.SIMD.rotateX:e.scalar.rotateX,e.scalar.rotateY=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],i=a[1],u=a[2],l=a[3],s=a[8],c=a[9],M=a[10],f=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-s*n,t[1]=i*e-c*n,t[2]=u*e-M*n,t[3]=l*e-f*n,t[8]=o*n+s*e,t[9]=i*n+c*e,t[10]=u*n+M*e,t[11]=l*n+f*e,t},e.SIMD.rotateY=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),e=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,e))),t},e.rotateY=n.USE_SIMD?e.SIMD.rotateY:e.scalar.rotateY,e.scalar.rotateZ=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],i=a[1],u=a[2],l=a[3],s=a[4],c=a[5],M=a[6],f=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+s*n,t[1]=i*e+c*n,t[2]=u*e+M*n,t[3]=l*e+f*n,t[4]=s*e-o*n,t[5]=c*e-i*n,t[6]=M*e-u*n,t[7]=f*e-l*n,t},e.SIMD.rotateZ=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),e=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,e),SIMD.Float32x4.mul(o,n))),t},e.rotateZ=n.USE_SIMD?e.SIMD.rotateZ:e.scalar.rotateZ,e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,a,r){var e,o,i,u=r[0],l=r[1],s=r[2],c=Math.sqrt(u*u+l*l+s*s);return Math.abs(c)<n.EPSILON?null:(c=1/c,u*=c,l*=c,s*=c,e=Math.sin(a),o=Math.cos(a),i=1-o,t[0]=u*u*i+o,t[1]=l*u*i+s*e,t[2]=s*u*i-l*e,t[3]=0,t[4]=u*l*i-s*e,t[5]=l*l*i+o,t[6]=s*l*i+u*e,t[7]=0,t[8]=u*s*i+l*e,t[9]=l*s*i-u*e,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=n+n,l=e+e,s=o+o,c=n*u,M=n*l,f=n*s,h=e*l,S=e*s,x=o*s,m=i*u,I=i*l,D=i*s;return t[0]=1-(h+x),t[1]=M+D,t[2]=f-I,t[3]=0,t[4]=M-D,t[5]=1-(c+x),t[6]=S+m,t[7]=0,t[8]=f+I,t[9]=S-m,t[10]=1-(c+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},e.getRotation=function(t,a){var r=a[0]+a[5]+a[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(a[6]-a[9])/n,t[1]=(a[8]-a[2])/n,t[2]=(a[1]-a[4])/n):a[0]>a[5]&a[0]>a[10]?(n=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/n,t[0]=.25*n,t[1]=(a[1]+a[4])/n,t[2]=(a[8]+a[2])/n):a[5]>a[10]?(n=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/n,t[0]=(a[1]+a[4])/n,t[1]=.25*n,t[2]=(a[6]+a[9])/n):(n=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/n,t[0]=(a[8]+a[2])/n,t[1]=(a[6]+a[9])/n,t[2]=.25*n),t},e.fromRotationTranslationScale=function(t,a,r,n){var e=a[0],o=a[1],i=a[2],u=a[3],l=e+e,s=o+o,c=i+i,M=e*l,f=e*s,h=e*c,S=o*s,x=o*c,m=i*c,I=u*l,D=u*s,d=u*c,v=n[0],F=n[1],b=n[2];return t[0]=(1-(S+m))*v,t[1]=(f+d)*v,t[2]=(h-D)*v,t[3]=0,t[4]=(f-d)*F,t[5]=(1-(M+m))*F,t[6]=(x+I)*F,t[7]=0,t[8]=(h+D)*b,t[9]=(x-I)*b,t[10]=(1-(M+S))*b,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,a,r,n,e){var o=a[0],i=a[1],u=a[2],l=a[3],s=o+o,c=i+i,M=u+u,f=o*s,h=o*c,S=o*M,x=i*c,m=i*M,I=u*M,D=l*s,d=l*c,v=l*M,F=n[0],b=n[1],p=n[2],w=e[0],y=e[1],g=e[2];return t[0]=(1-(x+I))*F,t[1]=(h+v)*F,t[2]=(S-d)*F,t[3]=0,t[4]=(h-v)*b,t[5]=(1-(f+I))*b,t[6]=(m+D)*b,t[7]=0,t[8]=(S+d)*p,t[9]=(m-D)*p,t[10]=(1-(f+x))*p,t[11]=0,t[12]=r[0]+w-(t[0]*w+t[4]*y+t[8]*g),t[13]=r[1]+y-(t[1]*w+t[5]*y+t[9]*g),t[14]=r[2]+g-(t[2]*w+t[6]*y+t[10]*g),t[15]=1,t},e.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r+r,u=n+n,l=e+e,s=r*i,c=n*i,M=n*u,f=e*i,h=e*u,S=e*l,x=o*i,m=o*u,I=o*l;return t[0]=1-M-S,t[1]=c+I,t[2]=f-m,t[3]=0,t[4]=c-I,t[5]=1-s-S,t[6]=h+x,t[7]=0,t[8]=f+m,t[9]=h-x,t[10]=1-s-M,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,a,r,n,e,o,i){var u=1/(r-a),l=1/(e-n),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*l,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},e.perspective=function(t,a,r,n,e){var o=1/Math.tan(a/2),i=1/(n-e);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(e+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*e*n*i,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),i=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(e+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-((i-u)*l*.5),t[9]=(e-o)*s*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},e.ortho=function(t,a,r,n,e,o,i){var u=1/(a-r),l=1/(n-e),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*l,t[14]=(i+o)*s,t[15]=1,t},e.lookAt=function(t,a,r,o){var i,u,l,s,c,M,f,h,S,x,m=a[0],I=a[1],D=a[2],d=o[0],v=o[1],F=o[2],b=r[0],p=r[1],w=r[2];return Math.abs(m-b)<n.EPSILON&&Math.abs(I-p)<n.EPSILON&&Math.abs(D-w)<n.EPSILON?e.identity(t):(f=m-b,h=I-p,S=D-w,x=1/Math.sqrt(f*f+h*h+S*S),f*=x,h*=x,S*=x,i=v*S-F*h,u=F*f-d*S,l=d*h-v*f,x=Math.sqrt(i*i+u*u+l*l),x?(x=1/x,i*=x,u*=x,l*=x):(i=0,u=0,l=0),s=h*l-S*u,c=S*i-f*l,M=f*u-h*i,x=Math.sqrt(s*s+c*c+M*M),x?(x=1/x,s*=x,c*=x,M*=x):(s=0,c=0,M=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=u,t[5]=c,t[6]=h,t[7]=0,t[8]=l,t[9]=M,t[10]=S,t[11]=0,t[12]=-(i*m+u*I+l*D),t[13]=-(s*m+c*I+M*D),t[14]=-(f*m+h*I+S*D),t[15]=1,t)},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t},e.sub=e.subtract,e.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t},e.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],M=t[8],f=t[9],h=t[10],S=t[11],x=t[12],m=t[13],I=t[14],D=t[15],d=a[0],v=a[1],F=a[2],b=a[3],p=a[4],w=a[5],y=a[6],g=a[7],P=a[8],E=a[9],A=a[10],z=a[11],O=a[12],R=a[13],_=a[14],L=a[15];return Math.abs(r-d)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(e-v)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(o-F)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(i-b)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(u-p)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(l-w)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(s-y)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-g)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(M-P)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(f-E)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(h-A)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(S-z)<=n.EPSILON*Math.max(1,Math.abs(S),Math.abs(z))&&Math.abs(x-O)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(O))&&Math.abs(m-R)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(I-_)<=n.EPSILON*Math.max(1,Math.abs(I),Math.abs(_))&&Math.abs(D-L)<=n.EPSILON*Math.max(1,Math.abs(D),Math.abs(L))},t.exports=e},function(t,a,r){var n=r(1),e=r(4),o=r(7),i=r(8),u={};u.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),a=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(n,e,i){var l=o.dot(e,i);return l<-.999999?(o.cross(t,a,e),o.length(t)<1e-6&&o.cross(t,r,e),o.normalize(t,t),u.setAxisAngle(n,t,Math.PI),n):l>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(t,e,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+l,u.normalize(n,n))}}(),u.setAxes=function(){var t=e.create();return function(a,r,n,e){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=e[0],t[4]=e[1],t[7]=e[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],u.normalize(a,u.fromMat3(a,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,a,r){r=.5*r;var n=Math.sin(r);return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=Math.cos(r),t},u.getAxisAngle=function(t,a){var r=2*Math.acos(a[3]),n=Math.sin(r/2);return 0!=n?(t[0]=a[0]/n,t[1]=a[1]/n,t[2]=a[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},u.add=i.add,u.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],u=r[0],l=r[1],s=r[2],c=r[3];return t[0]=n*c+i*u+e*s-o*l,t[1]=e*c+i*l+o*u-n*s,t[2]=o*c+i*s+n*l-e*u,t[3]=i*c-n*u-e*l-o*s,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],i=a[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*u,t[1]=e*l+o*u,t[2]=o*l-e*u,t[3]=i*l-n*u,t},u.rotateY=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],i=a[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l-o*u,t[1]=e*l+i*u,t[2]=o*l+n*u,t[3]=i*l-e*u,t},u.rotateZ=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],i=a[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+e*u,t[1]=e*l-n*u,t[2]=o*l+i*u,t[3]=i*l-o*u,t},u.calculateW=function(t,a){var r=a[0],n=a[1],e=a[2];return t[0]=r,t[1]=n,t[2]=e,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-e*e)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,a,r,n){var e,o,i,u,l,s=a[0],c=a[1],M=a[2],f=a[3],h=r[0],S=r[1],x=r[2],m=r[3];return o=s*h+c*S+M*x+f*m,o<0&&(o=-o,h=-h,S=-S,x=-x,m=-m),1-o>1e-6?(e=Math.acos(o),i=Math.sin(e),u=Math.sin((1-n)*e)/i,l=Math.sin(n*e)/i):(u=1-n,l=n),t[0]=u*s+l*h,t[1]=u*c+l*S,t[2]=u*M+l*x,t[3]=u*f+l*m,t},u.sqlerp=function(){var t=u.create(),a=u.create();return function(r,n,e,o,i,l){return u.slerp(t,n,i,l),u.slerp(a,e,o,l),u.slerp(r,t,a,2*l*(1-l)),r}}(),u.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r*r+n*n+e*e+o*o,u=i?1/i:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-e*u,t[3]=o*u,t},u.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,a){var r,n=a[0]+a[4]+a[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(a[5]-a[7])*r,t[1]=(a[6]-a[2])*r,t[2]=(a[1]-a[3])*r;else{var e=0;a[4]>a[0]&&(e=1),a[8]>a[3*e+e]&&(e=2);var o=(e+1)%3,i=(e+2)%3;r=Math.sqrt(a[3*e+e]-a[3*o+o]-a[3*i+i]+1),t[e]=.5*r,r=.5/r,t[3]=(a[3*o+i]-a[3*i+o])*r,t[o]=(a[3*o+e]+a[3*e+o])*r,t[i]=(a[3*i+e]+a[3*e+i])*r}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,a,r){var n=r(1),e={};e.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},e.clone=function(t){var a=new n.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},e.fromValues=function(t,a,r){var e=new n.ARRAY_TYPE(3);return e[0]=t,e[1]=a,e[2]=r,e},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},e.set=function(t,a,r,n){return t[0]=a,t[1]=r,t[2]=n,t},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t},e.sub=e.subtract,e.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t},e.mul=e.multiply,e.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t},e.div=e.divide,e.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},e.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},e.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t},e.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t},e.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},e.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t},e.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t},e.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return Math.sqrt(r*r+n*n+e*e)},e.dist=e.distance,e.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return r*r+n*n+e*e},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],r=t[1],n=t[2];return Math.sqrt(a*a+r*r+n*n)},e.len=e.length,e.squaredLength=function(t){var a=t[0],r=t[1],n=t[2];return a*a+r*r+n*n},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},e.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=r*r+n*n+e*e;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},e.cross=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=r[0],u=r[1],l=r[2];return t[0]=e*l-o*u,t[1]=o*i-n*l,t[2]=n*u-e*i,t},e.lerp=function(t,a,r,n){var e=a[0],o=a[1],i=a[2];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t},e.hermite=function(t,a,r,n,e,o){var i=o*o,u=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return t[0]=a[0]*u+r[0]*l+n[0]*s+e[0]*c,t[1]=a[1]*u+r[1]*l+n[1]*s+e[1]*c,t[2]=a[2]*u+r[2]*l+n[2]*s+e[2]*c,t},e.bezier=function(t,a,r,n,e,o){var i=1-o,u=i*i,l=o*o,s=u*i,c=3*o*u,M=3*l*i,f=l*o;return t[0]=a[0]*s+r[0]*c+n[0]*M+e[0]*f,t[1]=a[1]*s+r[1]*c+n[1]*M+e[1]*f,t[2]=a[2]*s+r[2]*c+n[2]*M+e[2]*f,t},e.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI,e=2*n.RANDOM()-1,o=Math.sqrt(1-e*e)*a;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=e*a,t},e.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=r[3]*n+r[7]*e+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*e+r[8]*o+r[12])/i,t[1]=(r[1]*n+r[5]*e+r[9]*o+r[13])/i,t[2]=(r[2]*n+r[6]*e+r[10]*o+r[14])/i,t},e.transformMat3=function(t,a,r){var n=a[0],e=a[1],o=a[2];return t[0]=n*r[0]+e*r[3]+o*r[6],t[1]=n*r[1]+e*r[4]+o*r[7],t[2]=n*r[2]+e*r[5]+o*r[8],t},e.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=r[0],u=r[1],l=r[2],s=r[3],c=s*n+u*o-l*e,M=s*e+l*n-i*o,f=s*o+i*e-u*n,h=-i*n-u*e-l*o;return t[0]=c*s+h*-i+M*-l-f*-u,t[1]=M*s+h*-u+f*-i-c*-l,t[2]=f*s+h*-l+c*-u-M*-i,t},e.rotateX=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0],o[1]=e[1]*Math.cos(n)-e[2]*Math.sin(n),o[2]=e[1]*Math.sin(n)+e[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateY=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[2]*Math.sin(n)+e[0]*Math.cos(n),o[1]=e[1],o[2]=e[2]*Math.cos(n)-e[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateZ=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0]*Math.cos(n)-e[1]*Math.sin(n),o[1]=e[0]*Math.sin(n)+e[1]*Math.cos(n),o[2]=e[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.forEach=function(){var t=e.create();return function(a,r,n,e,o,i){var u,l;for(r||(r=3),n||(n=0),l=e?Math.min(e*r+n,a.length):a.length,u=n;u<l;u+=r)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],o(t,t,i),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2];return a}}(),e.angle=function(t,a){var r=e.fromValues(t[0],t[1],t[2]),n=e.fromValues(a[0],a[1],a[2]);e.normalize(r,r),e.normalize(n,n);var o=e.dot(r,n);return o>1?0:Math.acos(o)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=a[0],u=a[1],l=a[2];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-u)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},t.exports=e},function(t,a,r){var n=r(1),e={};e.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},e.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},e.fromValues=function(t,a,r,e){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=r,o[3]=e,o},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},e.set=function(t,a,r,n,e){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},e.sub=e.subtract,e.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t[3]=a[3]*r[3],t},e.mul=e.multiply,e.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t[3]=a[3]/r[3],t},e.div=e.divide,e.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},e.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},e.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t[3]=Math.min(a[3],r[3]),t},e.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t[3]=Math.max(a[3],r[3]),t},e.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},e.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},e.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},e.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return Math.sqrt(r*r+n*n+e*e+o*o)},e.dist=e.distance,e.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return r*r+n*n+e*e+o*o},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return Math.sqrt(a*a+r*r+n*n+e*e)},e.len=e.length,e.squaredLength=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return a*a+r*r+n*n+e*e},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},e.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r*r+n*n+e*e+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=r*i,t[1]=n*i,t[2]=e*i,t[3]=o*i),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},e.lerp=function(t,a,r,n){var e=a[0],o=a[1],i=a[2],u=a[3];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t[3]=u+n*(r[3]-u),t},e.random=function(t,a){return a=a||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),e.normalize(t,t),e.scale(t,t,a),t},e.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3];return t[0]=r[0]*n+r[4]*e+r[8]*o+r[12]*i,t[1]=r[1]*n+r[5]*e+r[9]*o+r[13]*i,t[2]=r[2]*n+r[6]*e+r[10]*o+r[14]*i,t[3]=r[3]*n+r[7]*e+r[11]*o+r[15]*i,t},e.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=r[0],u=r[1],l=r[2],s=r[3],c=s*n+u*o-l*e,M=s*e+l*n-i*o,f=s*o+i*e-u*n,h=-i*n-u*e-l*o;return t[0]=c*s+h*-i+M*-l-f*-u,t[1]=M*s+h*-u+f*-i-c*-l,t[2]=f*s+h*-l+c*-u-M*-i,t[3]=a[3],t},e.forEach=function(){var t=e.create();return function(a,r,n,e,o,i){var u,l;for(r||(r=4),n||(n=0),l=e?Math.min(e*r+n,a.length):a.length,u=n;u<l;u+=r)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],t[3]=a[u+3],o(t,t,i),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2],a[u+3]=t[3];return a}}(),e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],u=a[0],l=a[1],s=a[2],c=a[3];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(e-l)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=e},function(t,a,r){var n=r(1),e={};e.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},e.clone=function(t){var a=new n.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},e.fromValues=function(t,a){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=a,r},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},e.set=function(t,a,r){return t[0]=a,t[1]=r,t},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t},e.sub=e.subtract,e.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t},e.mul=e.multiply,e.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t},e.div=e.divide,e.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},e.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},e.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t},e.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t},e.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},e.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t},e.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t},e.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return Math.sqrt(r*r+n*n)},e.dist=e.distance,e.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return r*r+n*n},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],r=t[1];return Math.sqrt(a*a+r*r)},e.len=e.length,e.squaredLength=function(t){var a=t[0],r=t[1];return a*a+r*r},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},e.normalize=function(t,a){var r=a[0],n=a[1],e=r*r+n*n;return e>0&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},e.cross=function(t,a,r){var n=a[0]*r[1]-a[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,a,r,n){var e=a[0],o=a[1];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t},e.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t},e.transformMat2=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e,t[1]=r[1]*n+r[3]*e,t},e.transformMat2d=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e+r[4],t[1]=r[1]*n+r[3]*e+r[5],t},e.transformMat3=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[3]*e+r[6],t[1]=r[1]*n+r[4]*e+r[7],t},e.transformMat4=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[4]*e+r[12],t[1]=r[1]*n+r[5]*e+r[13],t},e.forEach=function(){var t=e.create();return function(a,r,n,e,o,i){var u,l;for(r||(r=2),n||(n=0),l=e?Math.min(e*r+n,a.length):a.length,u=n;u<l;u+=r)t[0]=a[u],t[1]=a[u+1],o(t,t,i),a[u]=t[0],a[u+1]=t[1];return a}}(),e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},e.equals=function(t,a){var r=t[0],e=t[1],o=a[0],i=a[1];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-i)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))},t.exports=e}])})},{}],7:[function(t,a,r){"use strict";function n(){var t=s.WebGraphics.getContext();return t?(o=new M.Renderer(t),void(o.isReady&&(i=new c.Keyboard,u=new f.Game(t),l=new h.Camera(t),e()))):void alert("Unable to initialize WebGL. Your browser may not support it.")}function e(){window.requestAnimationFrame(e);var t=s.WebGraphics.getContext();s.WebGraphics.resizeToFullScreen(t)&&l.buildProjection(),S+=.01666667;var a=0,r=0,n=0;i.isKeyDown(87)&&(a=r=n=.4),i.isKeyDown(65)&&(a=1),i.isKeyDown(83)&&(r=1),i.isKeyDown(68)&&(n=1);var c=.25*Math.sin(.62831853*S)+.75;a*=c,r*=c,n*=c,t.clearColor(a,r,n,1),t.clear(t.COLOR_BUFFER_BIT),u.tick(i),l.eyePosition.set([0,0,3]),l.lookPosition.set([0,0,0]),l.update(),o.drawScene(u.actors,l)}var o,i,u,l,s=t("./util/webgraphics"),c=t("./util/keyboard"),M=t("./render/renderer"),f=t("./game/game"),h=t("./render/camera"),S=0;n()},{"./game/game":5,"./render/camera":8,"./render/renderer":9,"./util/keyboard":12,"./util/webgraphics":13}],8:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),o=t("../lib/gl-matrix"),i=function(){function t(a){n(this,t),this.viewTransform=o.mat4.create(),this.eyePosition=o.vec3.create(),this.lookPosition=o.vec3.create(),this.perspectiveTransform=o.mat4.create(),this.upDirection=o.vec3.create(),this.scratchMatrix=o.mat4.create(),this.gl=a,this.upDirection.set([0,1,0]),this.buildProjection()}return e(t,[{key:"update",value:function(){o.mat4.lookAt(this.scratchMatrix,this.eyePosition,this.lookPosition,this.upDirection),o.mat4.multiply(this.viewTransform,this.perspectiveTransform,this.scratchMatrix)}},{key:"buildProjection",value:function(){o.mat4.perspective(this.perspectiveTransform,3.14159/3,this.gl.canvas.clientWidth/this.gl.canvas.clientHeight,.5,100)}}]),t}();r.Camera=i},{"../lib/gl-matrix":6}],9:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),o=t("./shader_programs/basic_program"),i=function(){function t(a){n(this,t),this.activeProgram=null,this.activeProgramId=-1,this.activeAttrs=0,this.gl=a,this.programs=[],this.programs[0]=new o.BasicProgram(a),this.isReady=this.programs.every(function(t){return t.isValid})}return e(t,[{key:"drawScene",value:function(t,a){null!==this.activeProgram&&this.gl.uniformMatrix4fv(this.activeProgram.uniformViewProject,!1,a.viewTransform);var r=!0,n=!1,e=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var u=o.value;this.activeProgramId!==u.renderStyle&&(this.activateProgramAtIndex(u.renderStyle),this.gl.uniformMatrix4fv(this.activeProgram.uniformViewProject,!1,a.viewTransform)),this.gl.uniformMatrix4fv(this.activeProgram.uniformModel,!1,u.modelTransform),u.draw(this.gl)}}catch(t){n=!0,e=t}finally{try{!r&&i.return&&i.return()}finally{if(n)throw e}}}},{key:"activateProgramAtIndex",value:function(t){if(this.activeProgramId=t,this.activeProgram=this.programs[this.activeProgramId],this.gl.useProgram(this.activeProgram.glsl),this.activeProgram.attrCount!==this.activeAttrs)if(this.activeProgram.attrCount>this.activeAttrs)for(;this.activeAttrs<this.activeProgram.attrCount;this.activeAttrs++)this.gl.enableVertexAttribArray(this.activeAttrs);else for(;this.activeAttrs>this.activeProgram.attrCount;this.activeAttrs--)this.gl.disableVertexAttribArray(this.activeAttrs-1)}}]),t}();r.Renderer=i},{"./shader_programs/basic_program":10}],10:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function e(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function o(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}var i=t("./program"),u=function(t){function a(t){n(this,a);var r=e(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,a.vertexSource,a.fragmentSource,["a_pos"]));return r.attrCount=1,r.isValid&&(r.uniformViewProject=t.getUniformLocation(r.glsl,"u_viewProject"),r.uniformModel=t.getUniformLocation(r.glsl,"u_model")),r}return o(a,t),a}(i.Program);u.vertexSource="\n        uniform mat4 u_viewProject;\n        uniform mat4 u_model;\n\n        attribute vec4 a_pos;\n\n        void main() {\n            gl_Position = u_viewProject * u_model * a_pos;\n        }\n    ",u.fragmentSource="\n        precision mediump float;\n\n        void main() {\n            gl_FragColor = vec4(1, 0, 0.5, 1);\n        }\n    ",r.BasicProgram=u},{"./program":11}],11:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),o=function(){function t(a,r,e,o){n(this,t),this.vertexShader=t.createShader(a,a.VERTEX_SHADER,r),this.fragmentShader=t.createShader(a,a.FRAGMENT_SHADER,e),this.isValid=!(!this.vertexShader||!this.fragmentShader),this.isValid&&(this.glsl=t.createProgram(a,this.vertexShader,this.fragmentShader,o),this.isValid=!!this.glsl)}return e(t,null,[{key:"createShader",value:function(t,a,r){var n=t.createShader(a);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),
t.deleteShader(n),null)}},{key:"createProgram",value:function(t,a,r,n){var e=t.createProgram();t.attachShader(e,a),t.attachShader(e,r);var o=0,i=!0,u=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var M=s.value;t.bindAttribLocation(e,o,M),o++}}catch(t){u=!0,l=t}finally{try{!i&&c.return&&c.return()}finally{if(u)throw l}}return t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS)?e:(console.log(t.getProgramInfoLog(e)),null)}}]),t}();r.Program=o},{}],12:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),o=function(){function t(){var a=this;n(this,t),this.pressedBuffer=new ArrayBuffer(128),this.isPressedMap=new Uint8Array(this.pressedBuffer),this.isPressedMap.fill(0),this.handlers={},window.addEventListener("keydown",function(t){return a.handleKeyDown(t)},!1),window.addEventListener("keyup",function(t){return a.handleKeyUp(t)},!1),window.addEventListener("blur",function(t){return a.handleWindowBlur()},!1)}return e(t,[{key:"isKeyDown",value:function(t){return this.isPressedMap[t]>0}},{key:"registerEvent",value:function(t,a){this.handlers[t]=a}},{key:"handleKeyDown",value:function(t){t.keyCode>this.pressedBuffer.byteLength||0!==this.isPressedMap[t.keyCode]||(this.isPressedMap[t.keyCode]=1,t.keyCode in this.handlers&&this.handlers[t.keyCode]())}},{key:"handleKeyUp",value:function(t){t.keyCode>this.pressedBuffer.byteLength||(this.isPressedMap[t.keyCode]=0)}},{key:"handleWindowBlur",value:function(){this.isPressedMap.fill(0)}}]),t}();r.Keyboard=o},{}],13:[function(t,a,r){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),o=function(){function t(){n(this,t)}return e(t,null,[{key:"getContext",value:function(){return t.attemptedInit||(t.attemptedInit=!0,t.initialize()),t.gl}},{key:"getCanvas",value:function(){return t.canvas||(t.canvas=document.getElementById("glcanvas")),t.canvas}},{key:"resizeToFullScreen",value:function(t){var a=t.canvas.clientWidth,r=t.canvas.clientHeight;return(t.canvas.width!=a||t.canvas.height!=r)&&(t.canvas.width=a,t.canvas.height=r,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),!0)}},{key:"initialize",value:function(){t.gl=null;var a=t.getCanvas();if(a){var r=a.getContext("webgl")||a.getContext("experimental-webgl");r&&(t.gl=r)}}}]),t}();o.attemptedInit=!1,r.WebGraphics=o},{}]},{},[7]);